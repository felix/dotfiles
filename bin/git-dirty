#!/bin/sh

here=$PWD
base="$(realpath ${1:-.})"

for d in $(find $base -type d -name '.git'); do
	repo="$(dirname "$d")"
	count=$(cd "$repo" && git status --porcelain -uno |wc -l)
	[ "$count" -gt 0 ] && echo "$repo"
done
