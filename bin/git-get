#!/bin/sh

[ $# -eq 0 ] && printf "Missing repository" && exit 1

GITGETBASE="${GITGETBASE:-$HOME/src}"

repo="$(echo "$1" |sed -E 's/^.+@//;s/\.git$//;s@^.+//@@;s@:@/@g')"
dir="$GITGETBASE/$repo"

# replace clone dir name
[ "$2" != "" ] && dir="$(dirname "$dir")/$2"

mkdir -p "$(dirname "$dir")"
git clone "$1" "$dir"
